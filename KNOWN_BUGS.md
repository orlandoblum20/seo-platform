# –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –±–∞–≥–∏ –∏ –∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï - –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∏ –ö–ê–ñ–î–û–ú –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

### 1. APP_KEY —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ (–†–ï–®–ï–ù–û –≤ v3.6.13)
**–°–∏–º–ø—Ç–æ–º:** "No application encryption key has been specified", Server Error 500, "The MAC is invalid"
**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä—ã–π deploy.sh –º–æ–≥ –∑–∞—Ç–∏—Ä–∞—Ç—å .env —Ñ–∞–π–ª –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
**–†–µ—à–µ–Ω–∏–µ (v3.6.13):** –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω deploy.sh v2.0 —Å –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –∑–∞—â–∏—Ç–æ–π APP_KEY:
- –•—Ä–∞–Ω–∏–ª–∏—â–µ 1: `/root/.seo-platform-key`
- –•—Ä–∞–Ω–∏–ª–∏—â–µ 2: `/root/seo-backups/.app_key`
- –•—Ä–∞–Ω–∏–ª–∏—â–µ 3: `/root/seo-backups/.env.backup_*`
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–ø–∏—è: `/tmp/.env.protected`

**–ö–æ–º–∞–Ω–¥–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
```bash
./deploy.sh fix-key
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```bash
./deploy.sh status
```

### 2. ASSET_URL –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
**–°–∏–º–ø—Ç–æ–º:** –ë–µ–ª–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ JS/CSS —á–µ—Ä–µ–∑ HTTPS
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ASSET_URL=/ –≤ .env
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `ASSET_URL=/` –≤ .env
**–§–∞–π–ª:** `.env.example` —Å—Ç—Ä–æ–∫–∞ 8 - –î–û–õ–ñ–ï–ù —Å–æ–¥–µ—Ä–∂–∞—Ç—å `ASSET_URL=/`
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** `docker compose exec app cat /var/www/.env | grep ASSET_URL`

### 3. DNSPod –∫–∏—Ç–∞–π—Å–∫–∏–π URL
**–°–∏–º–ø—Ç–æ–º:** "DNSPOD API Error: Unknown error"
**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `dnsapi.cn` –≤–º–µ—Å—Ç–æ `api.dnspod.com`
**–§–∞–π–ª:** `app/Services/DNS/DnspodService.php` —Å—Ç—Ä–æ–∫–∞ 14
**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** `private const API_BASE = 'https://api.dnspod.com';`
**–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:** `private const API_BASE = 'https://dnsapi.cn';`

### 4. $request->has() –≤–º–µ—Å—Ç–æ $request->filled()
**–°–∏–º–ø—Ç–æ–º:** TypeError: Argument must be of type string, null given
**–ü—Ä–∏—á–∏–Ω–∞:** `has()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true –¥–∞–∂–µ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ null/empty
**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `app/Http/Controllers/Api/SiteController.php` —Å—Ç—Ä–æ–∫–∏ 33, 38, 43
- –õ—é–±–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** `$request->filled('search')`
**–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:** `$request->has('search')`

### 5. Rate limit —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
**–°–∏–º–ø—Ç–æ–º:** AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" —Ö–æ—Ç—è –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
**–ü—Ä–∏—á–∏–Ω–∞:** `diffInSeconds()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑-–∑–∞ timezone
**–§–∞–π–ª:** `app/Models/AiSetting.php` –º–µ—Ç–æ–¥ `canMakeRequest()`
**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** `$secondsSinceLastRequest = now()->timestamp - $this->last_request_at->timestamp;`
**–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:** `$secondsSinceLastRequest = now()->diffInSeconds($this->last_request_at);`

### 6. Cloudflare "Permission denied" –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–æ–Ω—ã
**–°–∏–º–ø—Ç–æ–º:** "Cloudflare API Error: Permission denied" (code 1068)
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π account_id –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–æ–Ω—ã
**–§–∞–π–ª:** `app/Services/DNS/CloudflareService.php` –º–µ—Ç–æ–¥ `addDomain()`
**–†–µ—à–µ–Ω–∏–µ:** –ù–ï –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å account.id - Cloudflare —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–∫–∫–∞—É–Ω—Ç
**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** –ù–µ –≤–∫–ª—é—á–∞—Ç—å `$data['account']` –≤ –∑–∞–ø—Ä–æ—Å

### 7. Nameservers –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Domain
**–°–∏–º–ø—Ç–æ–º:** NS —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –¥–æ–º–µ–Ω–∞
**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `'nameservers' => 'array'` –≤ $casts –º–æ–¥–µ–ª–∏ Domain
**–§–∞–π–ª:** `app/Models/Domain.php`
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤ $casts: `'nameservers' => 'array',`

---

## üî∂ –°–†–ï–î–ù–ò–ï - –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### 8. –ö–Ω–æ–ø–∫–∏ –ø—Ä–æ–ø–∞–¥–∞—é—Ç –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
**–°–∏–º–ø—Ç–æ–º:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, SSL, –ø—Ä–æ–≤–µ—Ä–∫–∏ NS
**–ü—Ä–∏—á–∏–Ω–∞:** Vue —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è Vue —Ñ–∞–π–ª–æ–≤ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
```bash
docker compose exec app npm run build
```
**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `resources/js/pages/Domains.vue` - –∫–Ω–æ–ø–∫–∏ SSL, NS
- `resources/js/pages/DnsAccounts.vue` - –∫–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (PencilIcon)

### 7. filterOptions –Ω–µ –Ω–∞–π–¥–µ–Ω
**–°–∏–º–ø—Ç–æ–º:** "filterOptions is not a function"
**–ü—Ä–∏—á–∏–Ω–∞:** API –º–µ—Ç–æ–¥ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
**–§–∞–π–ª—ã:**
- `routes/api.php` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–æ—É—Ç `/domains/filter-options`
- `resources/js/services/api.js` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ—Ç–æ–¥ `filterOptions()`

---

## üîµ –ù–ò–ó–ö–ò–ï - —Ä–µ–¥–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 8. –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º:** "The MAC is invalid" –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å DNS –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
**–ü—Ä–∏—á–∏–Ω–∞:** APP_KEY –∏–∑–º–µ–Ω–∏–ª—Å—è, —Å—Ç–∞—Ä—ã–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã
**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ
```bash
docker compose exec db psql -U seo_user -d seo_platform -c "DELETE FROM dns_accounts;"
docker compose exec db psql -U seo_user -d seo_platform -c "DELETE FROM ai_settings;"
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –†–ï–õ–ò–ó–û–ú

–í—ã–ø–æ–ª–Ω—è—Ç—å –ü–ï–†–ï–î —Å–æ–∑–¥–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ –∞—Ä—Ö–∏–≤–∞:

```bash
# 1. DNSPod URL
grep "API_BASE" app/Services/DNS/DnspodService.php
# –û–∂–∏–¥–∞–µ—Ç—Å—è: https://api.dnspod.com

# 2. ASSET_URL –≤ .env.example
grep "ASSET_URL" .env.example
# –û–∂–∏–¥–∞–µ—Ç—Å—è: ASSET_URL=/

# 3. SiteController - filled –≤–º–µ—Å—Ç–æ has
grep -n "has\|filled" app/Http/Controllers/Api/SiteController.php | head -5
# –û–∂–∏–¥–∞–µ—Ç—Å—è: filled('search'), filled('status'), filled('template_id')

# 4. AiSetting rate limit
grep "secondsSinceLastRequest" app/Models/AiSetting.php
# –û–∂–∏–¥–∞–µ—Ç—Å—è: now()->timestamp - $this->last_request_at->timestamp

# 5. –ö–Ω–æ–ø–∫–∏ –≤ Vue —Ñ–∞–π–ª–∞—Ö
grep -c "PencilIcon" resources/js/pages/DnsAccounts.vue
# –û–∂–∏–¥–∞–µ—Ç—Å—è: > 0
grep -c "SSL\|checkNs" resources/js/pages/Domains.vue
# –û–∂–∏–¥–∞–µ—Ç—Å—è: > 0

# 6. –ê—Ä—Ö–∏–≤ –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç .env
unzip -l seo-platform-vX.X.X.zip | grep "\.env$"
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –ø—É—Å—Ç–æ (–Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ)
```

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –î–∞—Ç–∞ | –í–µ—Ä—Å–∏—è | –ë–∞–≥ | –°—Ç–∞—Ç—É—Å |
|------|--------|-----|--------|
| 2026-01-21 | v3.6.14 | deploy.sh: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã artisan | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 2026-01-21 | v3.6.13 | deploy.sh v2.0 –∑–∞—â–∏—Ç–∞ APP_KEY | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 2026-01-21 | v3.6.13 | release-check.sh –¥–æ–±–∞–≤–ª–µ–Ω | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ |
| 2026-01-21 | v3.6.10 | DNSPod URL | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 2026-01-21 | v3.6.10 | Rate limit timezone | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 2026-01-21 | v3.6.10 | SiteController has‚Üífilled | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 2026-01-21 | v3.6.9 | ASSET_URL | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 2026-01-20 | v3.6.8 | APP_KEY –≤ –∞—Ä—Ö–∏–≤–µ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

---

## üÜï v3.6.14 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –∞—É–¥–∏—Ç–∞

### 9. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã artisan –≤ deploy.sh (–ò–°–ü–†–ê–í–õ–ï–ù–û)
**–°–∏–º–ø—Ç–æ–º:** "Command not found" –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ deploy.sh
**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:
- `app:create-admin` –≤–º–µ—Å—Ç–æ `admin:create`
- `app:create-primary-server` –≤–º–µ—Å—Ç–æ `server:create-primary`
**–§–∞–π–ª:** `deploy.sh` —Å—Ç—Ä–æ–∫–∏ 691, 695
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ –∫–æ–º–∞–Ω–¥

### 10. Docker volume read-only –æ—à–∏–±–∫–∞ (–ò–°–ü–†–ê–í–õ–ï–ù–û v3.6.15)
**–°–∏–º–ø—Ç–æ–º:** "read-only file system" –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
**–ü—Ä–∏—á–∏–Ω–∞:** Volume `build-data` –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª—Å—è –≤ read-only –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –æ–±—Ä–∞–∑–∞
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å shared volume `app-public` –º–µ–∂–¥—É app –∏ nginx
**–§–∞–π–ª:** `docker-compose.yml`

### 11. Nginx –Ω–µ –≤–∏–¥–∏—Ç public –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–ò–°–ü–†–ê–í–õ–ï–ù–û v3.6.15)
**–°–∏–º–ø—Ç–æ–º:** "realpath() /var/www/public failed (No such file or directory)"
**–ü—Ä–∏—á–∏–Ω–∞:** Nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∏–º–µ–ª –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
**–†–µ—à–µ–Ω–∏–µ:** Shared volume `app-public` –º–µ–∂–¥—É app –∏ nginx
**–§–∞–π–ª:** `docker-compose.yml`, `docker/nginx/default.conf`

### 12. unzip –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —á–∏—Å—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–ò–°–ü–†–ê–í–õ–ï–ù–û v3.6.15)
**–°–∏–º–ø—Ç–æ–º:** "unzip: command not found"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞ —á–∏—Å—Ç–æ–π Ubuntu –Ω–µ—Ç unzip
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤ quick-install.sh
**–§–∞–π–ª:** `quick-install.sh`
