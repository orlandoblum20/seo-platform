# üêõ SEO Platform - –ë–∞–≥ –¢—Ä–µ–∫–µ—Ä

> **–í–ê–ñ–ù–û:** –≠—Ç–æ—Ç —Ñ–∞–π–ª –≤–µ–¥—ë—Ç—Å—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö –±–∞–≥–æ–≤ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–π.
> –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –æ—à–∏–±–∫–∏ - —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª!

---

## üìã –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å–∏–º–ø—Ç–æ–º–∞–º

| –°–∏–º–ø—Ç–æ–º | –ü—Ä–∏—á–∏–Ω–∞ | –§–∞–π–ª | –†–µ—à–µ–Ω–∏–µ |
|---------|---------|------|---------|
| "No application encryption key" | APP_KEY –ø–æ—Ç–µ—Ä—è–Ω | .env | `./deploy.sh fix-key` |
| "The MAC is invalid" | APP_KEY –∏–∑–º–µ–Ω–∏–ª—Å—è | .env | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ |
| Server Error 500 (–±–µ–ª–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞) | APP_KEY –∏–ª–∏ ASSET_URL | .env | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ |
| HTTPS –Ω–µ –≥—Ä—É–∑–∏—Ç JS/CSS | ASSET_URL –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | .env | –î–æ–±–∞–≤–∏—Ç—å `ASSET_URL=/` |
| "DNSPOD API Error" | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL | DnspodService.php | `api.dnspod.com` |
| "Permission denied" Cloudflare | account_id –≤ –∑–∞–ø—Ä–æ—Å–µ | CloudflareService.php | –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å account |
| TypeError: null given | has() –≤–º–µ—Å—Ç–æ filled() | –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å filled() |
| AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä "–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" | Rate limit timezone | AiSetting.php | timestamp –≤–º–µ—Å—Ç–æ diffInSeconds |
| –ö–Ω–æ–ø–∫–∏ –ø—Ä–æ–ø–∞–¥–∞—é—Ç | Vue –Ω–µ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω | Vue —Ñ–∞–π–ª—ã | `npm run build` |
| "Command not found" | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –∫–æ–º–∞–Ω–¥—ã | deploy.sh | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∫–æ–º–∞–Ω–¥ |

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ë–ê–ì–ò

### BUG-001: APP_KEY —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** v3.6.8
- **–í–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** v3.6.13
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û
- **–°–∏–º–ø—Ç–æ–º—ã:**
  - "No application encryption key has been specified"
  - Server Error 500
  - "The MAC is invalid"
- **–ü—Ä–∏—á–∏–Ω–∞:** deploy.sh –∑–∞—Ç–∏—Ä–∞–ª .env –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã APP_KEY –≤ deploy.sh v2.0
- **–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–æ:**
  ```bash
  ./deploy.sh fix-key
  ```

### BUG-002: ASSET_URL –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** v3.6.8
- **–í–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** v3.6.9
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û
- **–°–∏–º–ø—Ç–æ–º—ã:**
  - –ë–µ–ª–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
  - JS/CSS –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ HTTPS
- **–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ASSET_URL –≤ .env
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `ASSET_URL=/` –≤ .env.example
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
  ```bash
  grep "ASSET_URL" .env
  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ASSET_URL=/
  ```

### BUG-003: DNSPod –∫–∏—Ç–∞–π—Å–∫–∏–π URL
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** v3.5
- **–í–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** v3.6.10
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û
- **–°–∏–º–ø—Ç–æ–º—ã:**
  - "DNSPOD API Error: Unknown error"
  - Timeout –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö
- **–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `dnsapi.cn` –≤–º–µ—Å—Ç–æ `api.dnspod.com`
- **–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç—å API_BASE –Ω–∞ `https://api.dnspod.com`
- **–§–∞–π–ª:** `app/Services/DNS/DnspodService.php` —Å—Ç—Ä–æ–∫–∞ 15
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
  ```bash
  grep "API_BASE" app/Services/DNS/DnspodService.php
  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: https://api.dnspod.com
  ```

### BUG-004: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã artisan –≤ deploy.sh
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** v3.6.13
- **–í–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** v3.6.14
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û
- **–°–∏–º–ø—Ç–æ–º—ã:**
  - "Command not found" –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- **–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
  - `php artisan app:create-admin`
  - `php artisan app:create-primary-server`
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
  - `php artisan admin:create`
  - `php artisan server:create-primary`
- **–§–∞–π–ª:** `deploy.sh`

---

## üü† –°–†–ï–î–ù–ò–ï –ë–ê–ì–ò

### BUG-005: $request->has() –≤–º–µ—Å—Ç–æ filled()
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** v3.6.7
- **–í–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** v3.6.9
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û
- **–°–∏–º–ø—Ç–æ–º—ã:**
  - TypeError: Argument must be of type string, null given
- **–ü—Ä–∏—á–∏–Ω–∞:** has() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true –¥–∞–∂–µ –¥–ª—è null/empty
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ has() –Ω–∞ filled() –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö
- **–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
  - `app/Http/Controllers/Api/SiteController.php`
  - –õ—é–±–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

### BUG-006: Rate limit —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** v3.6.9
- **–í–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** v3.6.10
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û
- **–°–∏–º–ø—Ç–æ–º—ã:**
  - AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
- **–ü—Ä–∏—á–∏–Ω–∞:** diffInSeconds() —Å timezone –ø—Ä–æ–±–ª–µ–º–∞–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `now()->timestamp - $this->last_request_at->timestamp`
- **–§–∞–π–ª:** `app/Models/AiSetting.php` –º–µ—Ç–æ–¥ `canMakeRequest()`

### BUG-007: Cloudflare "Permission denied"
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** v3.5
- **–í–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** v3.5.1
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û
- **–°–∏–º–ø—Ç–æ–º—ã:**
  - "Cloudflare API Error: Permission denied" (code 1068)
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è account_id –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–æ–Ω—ã
- **–†–µ—à–µ–Ω–∏–µ:** –ù–ï –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å account.id –≤ –∑–∞–ø—Ä–æ—Å addDomain
- **–§–∞–π–ª:** `app/Services/DNS/CloudflareService.php`

---

## üü¢ –ù–ò–ó–ö–ò–ï –ë–ê–ì–ò

### BUG-008: Nameservers –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** v3.6.0
- **–í–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** v3.6.8
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û
- **–°–∏–º–ø—Ç–æ–º—ã:**
  - NS —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞
- **–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç cast –¥–ª—è nameservers
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `'nameservers' => 'array'` –≤ $casts –º–æ–¥–µ–ª–∏ Domain
- **–§–∞–π–ª:** `app/Models/Domain.php`

### BUG-009: –ö–Ω–æ–ø–∫–∏ –ø—Ä–æ–ø–∞–¥–∞—é—Ç –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** v3.6.5
- **–í–µ—Ä—Å–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** v3.6.6
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û (—Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö)
- **–°–∏–º–ø—Ç–æ–º—ã:**
  - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–Ω–æ–ø–∫–∏ SSL, NS, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∏—á–∏–Ω–∞:** Vue —Ñ–∞–π–ª—ã –Ω–µ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω—ã
- **–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Vue —Ñ–∞–π–ª–æ–≤:
  ```bash
  docker compose exec app npm run build
  ```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –†–ï–õ–ò–ó–û–ú

```bash
#!/bin/bash
# release-check.sh

echo "=== SEO Platform Release Check ==="

# 1. DNSPod URL
echo -n "DNSPod URL: "
grep "API_BASE" app/Services/DNS/DnspodService.php | grep -q "api.dnspod.com" && echo "‚úì OK" || echo "‚úó FAIL"

# 2. ASSET_URL
echo -n "ASSET_URL: "
grep -q "ASSET_URL=/" .env.example && echo "‚úì OK" || echo "‚úó FAIL"

# 3. SiteController filled
echo -n "SiteController: "
grep -q "filled('search')" app/Http/Controllers/Api/SiteController.php && echo "‚úì OK" || echo "‚úó FAIL"

# 4. AiSetting rate limit
echo -n "AiSetting rate limit: "
grep -q "now()->timestamp" app/Models/AiSetting.php && echo "‚úì OK" || echo "‚úó FAIL"

# 5. Domain nameservers cast
echo -n "Domain nameservers: "
grep -q "'nameservers' => 'array'" app/Models/Domain.php && echo "‚úì OK" || echo "‚úó FAIL"

# 6. Vue –∫–Ω–æ–ø–∫–∏
echo -n "DnsAccounts PencilIcon: "
grep -c "PencilIcon" resources/js/pages/DnsAccounts.vue | grep -q "[1-9]" && echo "‚úì OK" || echo "‚úó FAIL"

echo -n "Domains SSL/NS: "
grep -c "SSL\|checkNs" resources/js/pages/Domains.vue | grep -q "[1-9]" && echo "‚úì OK" || echo "‚úó FAIL"

# 7. deploy.sh –∫–æ–º–∞–Ω–¥—ã
echo -n "deploy.sh admin:create: "
grep -q "admin:create" deploy.sh && echo "‚úì OK" || echo "‚úó FAIL"

echo -n "deploy.sh server:create-primary: "
grep -q "server:create-primary" deploy.sh && echo "‚úì OK" || echo "‚úó FAIL"

# 8. –ê—Ä—Ö–∏–≤ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç .env
echo -n "–ê—Ä—Ö–∏–≤ –±–µ–∑ .env: "
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞—Ä—Ö–∏–≤–∞

echo ""
echo "=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ==="
```

---

## üìå –ü–†–ê–í–ò–õ–ê –†–ê–ë–û–¢–´

1. **–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –±–∞–≥–∞:**
   - –î–æ–±–∞–≤–∏—Ç—å –≤ —ç—Ç–æ—Ç —Ñ–∞–π–ª
   - –£–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
   - –û–ø–∏—Å–∞—Ç—å —Å–∏–º–ø—Ç–æ–º—ã
   - –£–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

2. **–ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –±–∞–≥–∞:**
   - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "‚úÖ –†–ï–®–ï–ù–û"
   - –£–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –û–ø–∏—Å–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ
   - **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

3. **–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å release-check.sh
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏
   - –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-21 (v3.6.14)*
